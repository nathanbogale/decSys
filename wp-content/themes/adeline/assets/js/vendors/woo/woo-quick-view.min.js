var $j=jQuery.noConflict();$j(document).on("ready",function(){if("undefined"==typeof dpradelineLocalize)return!1;var n=$j("#dpr-qv-wrap"),o=$j("#dpr-qv-content");$j(document).on("click",".dpr-quick-view",function(a){a.preventDefault();var t=$j(this),r=$j(this).data("product_id");t.parent().addClass("loading"),$j.ajax({url:dpradelineLocalize.ajax_url,data:{action:"dpradeline_product_quick_view",product_id:r},success:function(a){var t=$j("html").innerWidth();$j("html").css("overflow","hidden");var r=$j("html").innerWidth();$j("html").css("margin-right",r-t),$j("html").addClass("dpr-qv-open"),o.html(a),n.fadeIn(),n.addClass("is-visible");var e=o.find(".variations_form");e.trigger("check_variations"),e.trigger("reset_image");var i=o.find(".variations_form");0<i.length&&(i.wc_variation_form(),i.find("select").change());var d=o.find(".dpr-qv-image");1<d.find("li").length&&d.flexslider()}}).done(function(){t.parent().removeClass("loading")})});var t=function(){$j("html").css({overflow:"","margin-right":""}),$j("html").removeClass("dpr-qv-open"),n.fadeOut(),n.removeClass("is-visible"),setTimeout(function(){o.html("")},600)};$j(".dpr-qv-overlay, .dpr-qv-close").on("click",function(a){a.preventDefault(),t()}),$j(document).keyup(function(a){27==a.keyCode&&t()});var a=function(){$j(document.body).on("click","#dpr-qv-content .product:not(.product-type-external) .single_add_to_cart_button",this.onAddToCart).on("added_to_cart",this.updateButton)};a.prototype.onAddToCart=function(a){a.preventDefault();var t=$j(this),r=$j(this).val(),e=$j('input[name="variation_id"]').val(),i=$j('input[name="quantity"]').val(),d=$j(this).closest(".variations_form"),n=d.find("select[name^=attribute]"),o={};t.removeClass("added"),t.addClass("loading"),n.length||(n=d.find("[name^=attribute]:checked")),n.length||(n=d.find("input[name^=attribute]")),n.each(function(){var a,t,r=$j(this),e=r.attr("name"),i=r.val();r.removeClass("error"),0===i.length?(a=e.lastIndexOf("_"),t=e.substring(a+1),r.addClass("required error").before("Please select "+t)):o[e]=i}),""!=e?$j.ajax({url:dpradelineLocalize.ajax_url,type:"POST",data:{action:"dpradeline_add_cart_single_product",product_id:r,variation_id:e,variation:o,quantity:i},success:function(a){$j(document.body).trigger("wc_fragment_refresh"),$j(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t])}}):$j.ajax({url:dpradelineLocalize.ajax_url,type:"POST",data:{action:"dpradeline_add_cart_single_product",product_id:r,quantity:i},success:function(a){$j(document.body).trigger("wc_fragment_refresh"),$j(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t])}})},a.prototype.updateButton=function(a,t,r,e){(e=void 0!==e&&e)&&(e.removeClass("loading"),e.addClass("added"),dpradelineLocalize.is_cart||0!==e.parent().find(".added_to_cart").length||e.after(' <a href="'+dpradelineLocalize.cart_url+'" class="added_to_cart wc-forward" title="'+dpradelineLocalize.view_cart+'">'+dpradelineLocalize.view_cart+"</a>"))},new a});